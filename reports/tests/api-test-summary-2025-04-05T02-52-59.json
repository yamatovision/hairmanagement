{
  "timestamp": "2025-04-05T02:52:59.790Z",
  "summary": {
    "total": 7,
    "success": 5,
    "failure": 2
  },
  "tests": {
    "auth": {
      "status": "success",
      "output": "API URL: http://localhost:5000/api/v1\n\n------- 認証APIテスト開始 -------\n\n🔍 テスト1: ログインAPI\nテスト実行中にエラーが発生しました: Error: connect ECONNREFUSED ::1:5000\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1555:16) {\n  errno: -61,\n  code: 'ECONNREFUSED',\n  syscall: 'connect',\n  address: '::1',\n  port: 5000\n}\n"
    },
    "user": {
      "status": "success",
      "output": "\u001b[34m===== ユーザープロフィール関連エンドポイントのテスト開始 =====\u001b[0m\n\n\u001b[34m認証トークンを取得中...\u001b[0m\n\u001b[31mログインに失敗しました: connect ECONNREFUSED ::1:5001\u001b[0m\n\n\u001b[33m認証なしでテストを続行します（失敗する可能性あり）\u001b[0m\n\n\u001b[31m✗ 現在のユーザー情報取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ ユーザーリスト取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ ユーザー情報更新: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ 通知設定の更新: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[33m警告: ユーザーIDの取得中にエラーが発生しました。テストはスキップされます。\u001b[0m\n\n\u001b[34m===== テスト結果サマリー =====\u001b[0m\n実行時間: 0.02秒\nテスト実行数: 4\n\u001b[32m成功: 0\u001b[0m\n\u001b[31m失敗: 4\u001b[0m\n\n\u001b[31m一部のテストが失敗しました。\u001b[0m\n\nテスト結果を保存しました: /Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/logs/user-api-test-2025-04-05T02-52-59.log\n"
    },
    "fortune": {
      "status": "success",
      "output": "テスト環境を設定しました: test\n使用中のAPIエンドポイント: http://localhost:5001/api/v1\n\u001b[34m===== 運勢予測関連エンドポイントのテスト開始 =====\u001b[0m\n\n\u001b[34m認証トークンを取得中...\u001b[0m\n\u001b[31mログインに失敗しました: connect ECONNREFUSED ::1:5001\u001b[0m\n\n\u001b[33m認証なしでテストを続行します（失敗する可能性あり）\u001b[0m\n\n\u001b[31m✗ 今日の五行属性と陰陽取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ デイリー運勢取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ 週間運勢予報取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ 日付指定の運勢取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ 範囲指定の運勢取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[31m✗ チーム相性取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED ::1:5001\n\n\u001b[33m警告: ユーザーIDの取得中にエラーが発生しました。テストはスキップされます。\u001b[0m\n\n\u001b[34m===== テスト結果サマリー =====\u001b[0m\n実行時間: 0.02秒\nテスト実行数: 6\n\u001b[32m成功: 0\u001b[0m\n\u001b[31m失敗: 6\u001b[0m\n\n\u001b[31m一部のテストが失敗しました。\u001b[0m\n\nテスト結果を保存しました: /Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/logs/fortune-api-test-2025-04-05T02-52-59.log\n"
    },
    "conversation": {
      "status": "success",
      "output": "\u001b[34m===== 会話システムAPIエンドポイントデバッグ開始 =====\u001b[0m\n\n\u001b[33mこのスクリプトは様々なエンドポイントを調査し、会話が戻らない原因を探ります\u001b[0m\n\n\u001b[34mデバッグエンドポイント接続確認を実行中...\u001b[0m\n\u001b[35m[lyjddssy] リクエスト開始: GET http://127.0.0.1:5001/api/v1/health\u001b[0m\n\u001b[35m[lyjddssy] ヘッダー: {}\u001b[0m\n\u001b[31m[lyjddssy] リクエスト失敗 (8ms): connect ECONNREFUSED 127.0.0.1:5001\u001b[0m\n\u001b[31m✗ デバッグエンドポイント接続確認: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED 127.0.0.1:5001\n\n\u001b[34m認証トークンを取得中...\u001b[0m\n\u001b[31mログインに失敗しました: connect ECONNREFUSED 127.0.0.1:5001\u001b[0m\n\n\u001b[33m認証に失敗したため、残りのテストをスキップします\u001b[0m\n\n"
    },
    "team": {
      "status": "success",
      "output": "\u001b[34m===== チーム連携機能関連エンドポイントのテスト開始 =====\u001b[0m\n\n\u001b[34m認証トークンを取得中...\u001b[0m\n\u001b[31mログインに失敗しました: connect ECONNREFUSED 0.0.0.0:8080\u001b[0m\n\n\u001b[33m認証なしでテストを続行します（失敗する可能性あり）\u001b[0m\n\n\u001b[31m✗ チーム一覧の取得: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED 0.0.0.0:8080\n\n\u001b[31m✗ 新規チーム作成: 失敗\u001b[0m\n  エラー: connect ECONNREFUSED 0.0.0.0:8080\n\n\u001b[33m警告: チームの作成に失敗したため、関連テストをスキップします\u001b[0m\n\n\u001b[34m===== テスト結果サマリー =====\u001b[0m\n実行時間: 0.01秒\nテスト実行数: 2\n\u001b[32m成功: 0\u001b[0m\n\u001b[31m失敗: 2\u001b[0m\n\n\u001b[31m一部のテストが失敗しました。\u001b[0m\n\nテスト結果を保存しました: /Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/logs/team-api-test-2025-04-05T02-52-59.log\n"
    },
    "compatibility": {
      "status": "failure",
      "exitCode": 1,
      "output": "\u001b[34m[2025-04-05T02:52:59.523Z] [INFO] テスト \"team-compatibility-test\" を開始します...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.524Z] [INFO] テスト環境: development\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.524Z] [INFO] API URL: http://localhost:5001/api/v1\u001b[0m\n\u001b[33m[2025-04-05T02:52:59.533Z] [WARN] デフォルトAPIサーバーが応答しません。代替を試行中...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.533Z] [INFO] 代替URL http://localhost:5002 を試行中...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.534Z] [INFO] 代替URL http://localhost:5000 を試行中...\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.536Z] [ERROR] 利用可能なAPIサーバーが見つかりません。テストを中断します。\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.536Z] [ERROR] ヘルスチェックエラー\u001b[0m\n\u001b[90m[2025-04-05T02:52:59.536Z] [ERROR_DETAILS] Error: API サーバーが応答しません\n    at TestRunner.setup (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:78:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TestRunner.execute (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:240:7)\n    at async run (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/scripts/test-team-compatibility.js:355:20)\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.536Z] [ERROR] テスト実行中のエラー\u001b[0m\n\u001b[90m[2025-04-05T02:52:59.536Z] [ERROR_DETAILS] Error: API サーバーが応答しません\n    at TestRunner.setup (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:78:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TestRunner.execute (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:240:7)\n    at async run (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/scripts/test-team-compatibility.js:355:20)\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] ===== テスト結果サマリー =====\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] テスト名: team-compatibility-test\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] 実行時間: 0.01秒\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] 実行テスト数: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] 成功: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] 失敗: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] 全体結果: 成功\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.536Z] [INFO] テストレポートが保存されました: reports/tests/team-compatibility-test-2025-04-05T02-52-59.json\u001b[0m\nテスト実行エラー: API サーバーが応答しません\n"
    },
    "analytics": {
      "status": "failure",
      "exitCode": 1,
      "output": "\u001b[34m[2025-04-05T02:52:59.775Z] [INFO] テスト \"analytics-endpoints-test\" を開始します...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.775Z] [INFO] テスト環境: development\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.775Z] [INFO] API URL: http://localhost:5001/api/v1\u001b[0m\n\u001b[33m[2025-04-05T02:52:59.783Z] [WARN] デフォルトAPIサーバーが応答しません。代替を試行中...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.783Z] [INFO] 代替URL http://localhost:5002 を試行中...\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.785Z] [INFO] 代替URL http://localhost:5000 を試行中...\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.786Z] [ERROR] 利用可能なAPIサーバーが見つかりません。テストを中断します。\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.786Z] [ERROR] ヘルスチェックエラー\u001b[0m\n\u001b[90m[2025-04-05T02:52:59.786Z] [ERROR_DETAILS] Error: API サーバーが応答しません\n    at TestRunner.setup (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:78:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TestRunner.execute (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:240:7)\n    at async run (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/scripts/test-analytics-endpoints.js:311:20)\u001b[0m\n\u001b[31m[2025-04-05T02:52:59.786Z] [ERROR] テスト実行中のエラー\u001b[0m\n\u001b[90m[2025-04-05T02:52:59.786Z] [ERROR_DETAILS] Error: API サーバーが応答しません\n    at TestRunner.setup (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:78:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async TestRunner.execute (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/TestLABO/lib/test-runner.js:240:7)\n    at async run (/Users/tatsuya/Desktop/システム開発/AppGenius2/patrolmanagement/scripts/test-analytics-endpoints.js:311:20)\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] ===== テスト結果サマリー =====\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] テスト名: analytics-endpoints-test\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] 実行時間: 0.01秒\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] 実行テスト数: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] 成功: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] 失敗: 0\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.786Z] [INFO] 全体結果: 成功\u001b[0m\n\u001b[34m[2025-04-05T02:52:59.787Z] [INFO] テストレポートが保存されました: reports/tests/analytics-endpoints-test-2025-04-05T02-52-59.json\u001b[0m\nテスト実行エラー: API サーバーが応答しません\n"
    }
  }
}