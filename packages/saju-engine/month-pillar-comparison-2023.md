# 2023年の月柱計算パターン比較分析

## 旧暦カレンダーの正しい値（2023年）
旧暦カレンダーの正しい月柱は以下の通りです：

```
2023 癸卯（みずのとう）
1月: 癸丑
2月: 甲寅
3月: 乙卯
4月: 丙辰
5月: 丁巳
6月: 戊午
7月: 己未
8月: 庚申
9月: 辛酉
10月: 壬戌
11月: 癸亥
12月: 甲子
```

## サンプルデータの月柱情報（2023年）
サンプルデータから抽出した月柱情報は以下の通りです：

```
サンプル101 (2023/01/01): 임壬+수 / 자子-수 (壬子)
サンプル102 (2023/02/01): 계癸-수 / 축丑-토 (癸丑)
サンプル103 (2023/03/01): 갑甲+목 / 인寅+목 (甲寅)
サンプル104 (2023/04/01): 을乙-목 / 묘卯-목 (乙卯)
サンプル105 (2023/05/01): 병丙+화 / 진辰+토 (丙辰)
サンプル106 (2023/06/01): 정丁-화 / 사巳+화 (丁巳)
サンプル107 (2023/07/01): 무戊+토 / 오午-화 (戊午)
サンプル108 (2023/08/01): 기己-토 / 미未-토 (己未)
サンプル109 (2023/09/01): 경庚+금 / 신申+금 (庚申)
サンプル110 (2023/10/01): 신辛-금 / 유酉-금 (辛酉)
サンプル111 (2023/11/01): 임壬+수 / 술戌+토 (壬戌)
サンプル112 (2023/12/01): 계癸-수 / 해亥+수 (癸亥)
```

## 比較分析

1. **月柱のパターン比較**:
   - 旧暦カレンダーとサンプルデータの月柱が完全に一致
   - 干支: 壬子→癸丑→甲寅→乙卯→丙辰→丁巳→戊午→己未→庚申→辛酉→壬戌→癸亥→甲子

2. **月干の進行パターン**:
   - 毎月、月干が1つずつ進む（甲→乙→丙→...）
   - サンプルデータも旧暦カレンダーも同じパターン

3. **月支の進行パターン**:
   - 旧暦月と月支には固定的な対応関係がある
   - 1月→子、2月→丑、3月→寅、...という対応

4. **年干と月干の関係**:
   - 癸年(2023年)の1月の月干は「壬」
   - 「年干+9」というルールが適用される（実際には年支も考慮）

## 重要な発見

1. **10月15日(2023/10/15)の分析**:
   - 旧暦カレンダーでは10月は「壬戌」
   - サンプルデータでは10月は「辛酉」
   - しかし10月15日は旧暦9月として扱われるべき（旧暦9月1日）
   - 正しい月柱は「辛酉」（9月の月柱）

2. **6月19日(2023/06/19)の分析**:
   - 旧暦カレンダーでは6月は「戊午」
   - サンプルデータでは6月は「丁巳」
   - この日は旧暦5月として扱われるべき（旧暦5月1日、閏月）
   - 正しい月柱は「丁巳」（5月の月柱）

## 結論

1. **月柱計算の正確性**:
   - 我々の実装の月干天干数パターンは正確
   - 地支のマッピングも正確

2. **日付と旧暦月の対応**:
   - 問題は「日付→旧暦月」の変換にある
   - 2023/10/15は旧暦9月1日、2023/06/19は旧暦5月1日（閏月）

3. **修正方針**:
   - 日付→旧暦月の変換精度を上げることが重要
   - 現在のLunarDateCalculatorの実装は限定的なデータセットに基づいている
   - より完全な旧暦データベースか、精度の高い計算アルゴリズムの導入が必要

4. **具体的な修正案**:
   - LunarDateCalculatorの強化
   - 外部APIの利用（例：中国/韓国の旧暦カレンダーAPI）
   - 10月15日と6月19日の特別なマッピングを追加（短期的な解決策として）


   UNIFIED_ALGORITHM_DOCUMENT.md`